# Древовидное меню
## Шаблоны HTML-страниц
Новые HTML-шаблоны добавляем по маршруту "`templates/`".

### Родительский 
Родительский шаблон храниться по маршруту "`templates/layout`".\
Шаблон хранит в себе блоки для изменений при наследии на другие страницы.

### Добавление шаблонов
Добавляя новые шаблоны, необходимо указать маршруты в "`templates/`"
- "`menu_app/models.py::PageModel`" Стр.: 80 - 92 (2 строки);


## Тип меню
Имеем базовые типы: "`TOP`", "`SIDE`", "`BOTTOM`".

Указывать меню или нет, определяется когда создаем родительскую страницу и \
выбираем в каком меню указывать.

Обрабатывается:
- "`levelMenuModel`";
- "`MenuModel`".

При добавлении нового вида меню, его необходимо \
внести в "`menu_app/models.py::levelMenuModel`".\
Затем, опубликовать в панели администраторов "`Levels of menu`".\
Публикация в "`Levels of menu`" для того, чтоб создавая страницы, могли видеть \
новое меню.

Note: Один тип вложенности.

## Создаём страницы
Для работы с новыми страницами, прописаны модели:
- "`BaseLinkModel`" абстрактная модель;
- "`PageModel`" главные страны;
- "`SubPageModel`" дочерние страницы.

В панели администратора, все страницы создаются по одному маршруту.\
![ALL web_pages to the admin panel](/img/all_admin_page.png)

Note: на данный момент, любая страница собой представляет ограниченное кол-во полей:
- "`Reference`" - ссылка. В родительской странице слеш "`/`" в кнце обязателен. \
В дочерних (sub) слеш "`/`" в начале и в конце обязательны;
- "`Title`" - заголовок страницы;
- "`Activate`" - показывать страницу или нет;
- "`Choose the page's template`" шаблон для контента.\
Note: Редактор контента не прикручен.

Ниже:
1. Выбираем меню: "`TOP`", "`SIDE`", "`BOTTOM`".
2. Создаем/добавляем дочерние страницы. По составу полей, как и в родительских. Плюс\
поле "`Parent`".\
"`Parent`" можно не трогать. При сохранении поле автоматически \
заполняется содержимым из "`Title`" (родительской страницы).

![Page](/img/admin_page.png)

Создавая страницу, не забыть указать - активная. В выбраных меню опубликуется \
ссылка на вновь созданную страницу.

Note: Добавляем дочерние страницы - формируем вложеность link-ов в меню.\


При загрузке шаблона,  в шаблон поступает\
отсортированный, по типам ("`level`") меню,  HTML тег "`<a>`" (с учетом вложенностью).\
HTML тег "`<a>`", в шаблоне просто распределяются по меню.

![sub_page](/img/sub_menu.png)

## Stack в backend-е:
- синхронный кол;
- регулярные выражения в валидаторах;
- итераторы;
- меню через template tags;
- все линки храняться в db;
- Количество меню на странице регулируемое;
- При клике по меню, происходит переход.

## Команды:
````text
git clone < repo > - слонируем проект
py pip install --ubgrade pip - обновление установщика
py pip install -m requirements.txt - устанавливаем зависимости
createdb -U postgres <name_db> - создает БД
python manage.py migrate - создает базу данных 
py manage.py createsuperuser - создаем польоователя
python manage.py runserver - запускает проект
````

## ENV

```text
SECRET_KEY_DJ= < secret key of django >
POSTGRES_DB=manuapp
POSTGRES_PASSWORD=123
POSTGRES_USER=postgres
POSTGRES_HOST=127.0.0.1
POSTGRES_PORT=5432
superuser=root
superuser_password=123

```